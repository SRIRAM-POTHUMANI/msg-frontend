{"ast":null,"code":"import _regeneratorRuntime from\"E:/msg/msg-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/msg/msg-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/msg/msg-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{SearchOutlined,AttachFile,InsertEmoticon,MicNone}from\"@material-ui/icons\";import axios from\"./axios\";import React,{useState,useRef,useEffect}from\"react\";import\"./Chat.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chatbody(_ref){var messages=_ref.messages,name=_ref.name,toName=_ref.toName;console.log(messages);var msgsender=\"chat_reciever chat_message \";var msgreciever=\"chat_message\";var _useState=useState([]),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setinput=_useState2[1];var messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};// const [newmessages, setnewMessages]= useState([]);\n// setnewMessages(messages);\nvar sendMessage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return axios.post(\"/messages/new\",{message:input,name:name,toname:toName,timestamp:Date(),recieved:true});case 3:setinput(\"\");// await axios.get('/messages/sync').then((response) =>{\n//   setnewMessages(response.data)\n// })\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return function sendMessage(_x){return _ref2.apply(this,arguments);};}();var privateMessages1=messages.filter(function(msg){return name==msg.name&&toName==msg.toname||name==msg.toname&&toName==msg.name;});// console.log(privateMessages1);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat_body\",children:[privateMessages1.map(function(msg){return/*#__PURE__*/ (// let isUser = (name === message.name);\n_jsxs(\"p\",{className:name===msg.name?msgsender:msgreciever,children:[/*#__PURE__*/_jsx(\"span\",{className:\"chat_name\",children:msg.name}),msg.message,/*#__PURE__*/_jsx(\"span\",{className:\"chat_timestamp\",children:msg.timestamp})]}));}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat_footer\",children:[/*#__PURE__*/_jsx(InsertEmoticon,{}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{value:input,onChange:function onChange(e){return setinput(e.target.value);},placeholder:\"Type a message\",type:\"text\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:sendMessage,type:\"submit\",children:[\" \",\"send a message\"]})]}),/*#__PURE__*/_jsx(MicNone,{})]})]});}export default Chatbody;","map":{"version":3,"sources":["E:/msg/msg-frontend/src/Chatbody.js"],"names":["SearchOutlined","AttachFile","InsertEmoticon","MicNone","axios","React","useState","useRef","useEffect","Chatbody","messages","name","toName","console","log","msgsender","msgreciever","input","setinput","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","sendMessage","e","preventDefault","post","message","toname","timestamp","Date","recieved","privateMessages1","filter","msg","map","target","value"],"mappings":"2ZAAA,OACEA,cADF,CAEEC,UAFF,CAGEC,cAHF,CAIEC,OAJF,KAKO,oBALP,CAMA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,CAAkCC,SAAlC,KAAmD,OAAnD,CACA,MAAO,YAAP,C,wFAEA,QAASC,CAAAA,QAAT,MAA8C,IAA1BC,CAAAA,QAA0B,MAA1BA,QAA0B,CAAhBC,IAAgB,MAAhBA,IAAgB,CAAVC,MAAU,MAAVA,MAAU,CAC5CC,OAAO,CAACC,GAAR,CAAYJ,QAAZ,EACA,GAAMK,CAAAA,SAAS,CAAG,6BAAlB,CACA,GAAMC,CAAAA,WAAW,CAAG,cAApB,CACA,cAA0BV,QAAQ,CAAC,EAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,cAAc,CAAGZ,MAAM,CAAC,IAAD,CAA7B,CACA,GAAMa,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,2BAC3B,uBAAAD,cAAc,CAACE,OAAf,sEAAwBC,cAAxB,CAAuC,CAAEC,QAAQ,CAAE,QAAZ,CAAvC,EACD,CAFD,CAIA;AACA;AACA,GAAMC,CAAAA,WAAW,2FAAG,iBAAOC,CAAP,kHAClBA,CAAC,CAACC,cAAF,GADkB,sBAEZtB,CAAAA,KAAK,CAACuB,IAAN,CAAW,eAAX,CAA4B,CAChCC,OAAO,CAAEX,KADuB,CAEhCN,IAAI,CAAEA,IAF0B,CAGhCkB,MAAM,CAAEjB,MAHwB,CAIhCkB,SAAS,CAAEC,IAAI,EAJiB,CAKhCC,QAAQ,CAAE,IALsB,CAA5B,CAFY,QASlBd,QAAQ,CAAC,EAAD,CAAR,CAEA;AACA;AACA;AAbkB,sDAAH,kBAAXM,CAAAA,WAAW,6CAAjB,CAgBA,GAAMS,CAAAA,gBAAgB,CAAGvB,QAAQ,CAACwB,MAAT,CACvB,SAACC,GAAD,QACGxB,CAAAA,IAAI,EAAIwB,GAAG,CAACxB,IAAZ,EAAoBC,MAAM,EAAIuB,GAAG,CAACN,MAAnC,EACClB,IAAI,EAAIwB,GAAG,CAACN,MAAZ,EAAsBjB,MAAM,EAAIuB,GAAG,CAACxB,IAFvC,EADuB,CAAzB,CAKA;AACA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,aAAK,SAAS,CAAC,WAAf,WAKGsB,gBAAgB,CAACG,GAAjB,CAAqB,SAACD,GAAD,sBACpB;AACA,WAAG,SAAS,CAAExB,IAAI,GAAKwB,GAAG,CAACxB,IAAb,CAAoBI,SAApB,CAAgCC,WAA9C,wBACE,aAAM,SAAS,CAAC,WAAhB,UAA6BmB,GAAG,CAACxB,IAAjC,EADF,CAEGwB,GAAG,CAACP,OAFP,cAGE,aAAM,SAAS,CAAC,gBAAhB,UAAkCO,GAAG,CAACL,SAAtC,EAHF,GAFoB,GAArB,CALH,cAaE,YAAK,GAAG,CAAEX,cAAV,EAbF,GADF,cAgBE,aAAK,SAAS,CAAC,aAAf,wBACE,KAAC,cAAD,IADF,cAEE,qCACE,cACE,KAAK,CAAEF,KADT,CAEE,QAAQ,CAAE,kBAACQ,CAAD,QAAOP,CAAAA,QAAQ,CAACO,CAAC,CAACY,MAAF,CAASC,KAAV,CAAf,EAFZ,CAGE,WAAW,CAAC,gBAHd,CAIE,IAAI,CAAC,MAJP,EADF,cAOE,gBAAQ,OAAO,CAAEd,WAAjB,CAA8B,IAAI,CAAC,QAAnC,WACG,GADH,oBAPF,GAFF,cAcE,KAAC,OAAD,IAdF,GAhBF,GADF,CAmCD,CAED,cAAef,CAAAA,QAAf","sourcesContent":["import {\r\n  SearchOutlined,\r\n  AttachFile,\r\n  InsertEmoticon,\r\n  MicNone,\r\n} from \"@material-ui/icons\";\r\nimport axios from \"./axios\";\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport \"./Chat.css\";\r\n\r\nfunction Chatbody({ messages, name, toName }) {\r\n  console.log(messages);\r\n  const msgsender = \"chat_reciever chat_message \";\r\n  const msgreciever = \"chat_message\";\r\n  const [input, setinput] = useState([]);\r\n  const messagesEndRef = useRef(null);\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  // const [newmessages, setnewMessages]= useState([]);\r\n  // setnewMessages(messages);\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    await axios.post(\"/messages/new\", {\r\n      message: input,\r\n      name: name,\r\n      toname: toName,\r\n      timestamp: Date(),\r\n      recieved: true,\r\n    });\r\n    setinput(\"\");\r\n\r\n    // await axios.get('/messages/sync').then((response) =>{\r\n    //   setnewMessages(response.data)\r\n    // })\r\n  };\r\n\r\n  const privateMessages1 = messages.filter(\r\n    (msg) =>\r\n      (name == msg.name && toName == msg.toname) ||\r\n      (name == msg.toname && toName == msg.name)\r\n  );\r\n  // console.log(privateMessages1);\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"chat_body\">\r\n        {/* {\r\nname === messages.name &&\r\n//  toName === messages.name) \r\n<div> */}\r\n        {privateMessages1.map((msg) => (\r\n          // let isUser = (name === message.name);\r\n          <p className={name === msg.name ? msgsender : msgreciever}>\r\n            <span className=\"chat_name\">{msg.name}</span>\r\n            {msg.message}\r\n            <span className=\"chat_timestamp\">{msg.timestamp}</span>\r\n          </p>\r\n        ))}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n      <div className=\"chat_footer\">\r\n        <InsertEmoticon />\r\n        <form>\r\n          <input\r\n            value={input}\r\n            onChange={(e) => setinput(e.target.value)}\r\n            placeholder=\"Type a message\"\r\n            type=\"text\"\r\n          />\r\n          <button onClick={sendMessage} type=\"submit\">\r\n            {\" \"}\r\n            send a message\r\n          </button>\r\n        </form>\r\n        <MicNone />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chatbody;\r\n"]},"metadata":{},"sourceType":"module"}