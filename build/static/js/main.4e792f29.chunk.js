(this["webpackJsonpmsg-frontend"]=this["webpackJsonpmsg-frontend"]||[]).push([[0],{102:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(11),c=n.n(s),i=(n(102),n(36)),o=n(8),j=n(50),l=n(15),u=n.n(l),d=n(24),b=n(12),h=n(60),O=n(4),m=n(79),p=n.n(m),x=n(177),f=n(18),g=n(191),v=n(179),w=n(180),N=n(183),S=n(178),y=n(44),k=n(182),C=n(181),B=n(87),_=n.n(B),P=n(88),q=n.n(P),I=n(89),L=n.n(I),R=n(184),W=n(185),F=n(186),E=n(192),V=n(172),T=n(176),D=n(80),z=n.n(D).a.create({baseURL:"https://rps-msg.herokuapp.com"}),H=(n(77),n(3));var J=function(e){var t=e.messages,n=e.name,r=e.toName;console.log(t);var s=Object(a.useState)([]),c=Object(b.a)(s,2),i=c[0],o=c[1],j=Object(a.useRef)(null),l=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,z.post("/messages/new",{message:i,name:n,toname:r,timestamp:Date(),recieved:!0});case 3:o("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=t.filter((function(e){return n==e.name&&r==e.toname||n==e.toname&&r==e.name}));return Object(H.jsxs)("div",{className:"container",children:[Object(H.jsxs)("div",{className:"chat_body",children:[h.map((function(e){return Object(H.jsxs)("p",{className:n===e.name?"chat_reciever chat_message ":"chat_message",children:[Object(H.jsx)("span",{className:"chat_name",children:e.name}),e.message,Object(H.jsx)("span",{className:"chat_timestamp",children:e.timestamp})]})})),Object(H.jsx)("div",{ref:j})]}),Object(H.jsxs)("div",{className:"chat_footer",children:[Object(H.jsx)(V.a,{}),Object(H.jsxs)("form",{children:[Object(H.jsx)("input",{value:i,onChange:function(e){return o(e.target.value)},placeholder:"Type a message",type:"text"}),Object(H.jsxs)("button",{onClick:l,type:"submit",children:[" ","send a message"]})]}),Object(H.jsx)(T.a,{})]})]})},M=n(86),U=localStorage.getItem("token"),G=Object(M.a)(U).existUser.name,A=200,K=Object(x.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(A,"px)"),marginLeft:A,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:A,flexShrink:0},drawerPaper:{width:A},drawerHeader:Object(h.a)(Object(h.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-200},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));function Q(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),i=Object(b.a)(c,2),o=i[0],l=i[1];Object(a.useEffect)((function(){s(G),l(prompt("Please enter to name"))}),[]);var h=new p.a("7b837337ccb8aebc6007",{cluster:"ap2"}),m=Object(a.useState)([]),x=Object(b.a)(m,2),B=x[0],P=x[1],I=Object(a.useState)([]),V=Object(b.a)(I,2),T=V[0],D=V[1],M=Object(a.useRef)(null),U=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get("/messages/sync").then((function(e){P(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get("/users/userlist").then((function(e){D(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=h.subscribe("mern-msg");return e.bind("inserted",(function(e){U(),A()})),function(){e.unbind_all()}}),[B]);var Q=K(),X=Object(f.a)(),Y=r.a.useState(!0),Z=Object(b.a)(Y,2),$=Z[0],ee=Z[1];return console.log(A),Object(H.jsxs)("div",{className:Q.root,children:[Object(H.jsx)(S.a,{}),Object(H.jsx)(v.a,{position:"fixed",className:Object(O.a)(Q.appBar,Object(j.a)({},Q.appBarShift,$)),children:Object(H.jsxs)(w.a,{children:[Object(H.jsx)(C.a,{color:"inherit","aria-label":"open drawer",onClick:function(){ee(!0)},edge:"start",className:Object(O.a)(Q.menuButton,$&&Q.hide),children:Object(H.jsx)(_.a,{})}),Object(H.jsx)(y.a,{variant:"h6",noWrap:!0,children:"Persistent drawer"})]})}),Object(H.jsxs)(g.a,{className:Q.drawer,variant:"persistent",anchor:"left",open:$,classes:{paper:Q.drawerPaper},children:[Object(H.jsxs)("div",{className:Q.drawerHeader,children:[Object(H.jsx)(E.a,{}),Object(H.jsx)("h2",{children:"Sender name"}),Object(H.jsx)(C.a,{onClick:function(){ee(!1)},children:"ltr"===X.direction?Object(H.jsx)(q.a,{}):Object(H.jsx)(L.a,{})})]}),Object(H.jsx)(k.a,{}),Object(H.jsx)(N.a,{children:T.map((function(e){return Object(H.jsxs)(R.a,{button:!0,children:[Object(H.jsx)(W.a,{children:Object(H.jsx)(E.a,{className:Q.small})}),Object(H.jsx)(F.a,{primary:e.name})]},e._id)}))})]}),Object(H.jsx)("main",{children:Object(H.jsxs)("div",{className:"chat fixed-bottom",children:[Object(H.jsx)(J,{messages:B,name:n,toName:o}),function(){var e;null===(e=M.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()]})})]})}n(78);var X=n(189),Y=n(187),Z=n(188),$=Object(x.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}));var ee=function(){$();var e=Object(a.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(),c=Object(b.a)(s,2),o=c[0],j=c[1],l=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.post("/users/login",{email:n,password:o});case 3:(t=e.sent).data&&localStorage.setItem("token",t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(H.jsxs)("div",{className:"container login_container",children:[Object(H.jsx)("h1",{children:"Sign-in"}),Object(H.jsx)("hr",{}),Object(H.jsx)("div",{className:"row",children:Object(H.jsx)(X.a,{style:{minWidth:"60%"},required:!0,id:"standard-required",label:"E-mail",defaultValue:n,onChange:function(e){return r(e.target.value)}})}),Object(H.jsx)("div",{className:"row",children:Object(H.jsx)(X.a,{style:{minWidth:"60%"},required:!0,id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:function(e){return j(e.target.value)}})}),Object(H.jsx)("div",{className:"row loginButton loginBut",children:Object(H.jsx)(i.b,{to:"/chat",children:Object(H.jsx)(Y.a,{className:"loginBut",variant:"outlined",onClick:l,children:"Login"})})}),Object(H.jsx)("div",{className:"row",children:Object(H.jsx)(Z.a,{component:"button",variant:"body2",href:"/forgotpw",children:"Forgot Password"})}),Object(H.jsx)("hr",{}),Object(H.jsx)("div",{className:"row regButton",children:Object(H.jsx)(i.b,{to:"/reg",children:Object(H.jsx)(Y.a,{variant:"outlined",children:"Register"})})})]})},te=Object(x.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var ne=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),o=Object(b.a)(c,2),j=o[0],l=o[1],h=Object(a.useState)(""),O=Object(b.a)(h,2),m=O[0],p=O[1],x=Object(a.useState)(""),f=Object(b.a)(x,2),g=f[0],v=f[1],w=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.post("/users/saveuser",{name:n,phone:j,email:m,password:g});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),N=(te(),r.a.useState(!1)),S=Object(b.a)(N,2);return S[0],S[1],Object(H.jsxs)("div",{className:"container login_container",children:[Object(H.jsx)("h1",{children:"Register"}),Object(H.jsx)("hr",{}),Object(H.jsx)("div",{className:"row",children:Object(H.jsx)(X.a,{style:{minWidth:"60%"},id:"standard-required",label:"Name",defaultValue:n,onChange:function(e){return s(e.target.value)}})}),Object(H.jsx)("div",{className:"row",children:Object(H.jsx)(X.a,{style:{minWidth:"60%"},id:"standard-required",label:"Phone",defaultValue:j,onChange:function(e){return l(e.target.value)}})}),Object(H.jsx)("div",{className:"row",children:Object(H.jsx)(X.a,{style:{minWidth:"60%"},required:!0,id:"standard-required",label:"E-mail",defaultValue:m,onChange:function(e){return p(e.target.value)}})}),Object(H.jsx)("div",{className:"row",children:Object(H.jsx)(X.a,{style:{minWidth:"60%"},required:!0,id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:function(e){return v(e.target.value)}})}),Object(H.jsxs)("div",{className:"row loginButton",children:[Object(H.jsx)("hr",{}),Object(H.jsx)(i.b,{to:"/",children:Object(H.jsx)(Y.a,{variant:"outlined",color:"primary",onClick:w,children:"Register"})})]})]})};var ae=function(){return Object(H.jsx)(i.a,{children:Object(H.jsxs)("div",{className:"container-sm",children:[Object(H.jsx)(o.c,{children:Object(H.jsx)(o.a,{path:"/",element:Object(H.jsx)(ee,{})})}),Object(H.jsx)(o.c,{children:Object(H.jsx)(o.a,{path:"/reg",element:Object(H.jsx)(ne,{})})}),Object(H.jsx)(o.c,{children:Object(H.jsx)(o.a,{path:"/chat",element:Object(H.jsx)(Q,{})})})]})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(ae,{})}),document.getElementById("root")),re()},77:function(e,t,n){},78:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.4e792f29.chunk.js.map